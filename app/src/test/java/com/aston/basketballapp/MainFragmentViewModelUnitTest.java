package com.aston.basketballapp;

import org.junit.Assert;
import org.junit.Before;
import org.junit.Rule;
import org.junit.Test;
import org.junit.rules.TestRule;
import org.mockito.Mock;
import org.mockito.Mockito;
import retrofit2.mock.Calls;

import static org.junit.Assert.*;

import android.view.View;

import androidx.arch.core.executor.testing.InstantTaskExecutorRule;
import androidx.lifecycle.Observer;

import com.aston.basketballapp.engine.model.schedule.ScheduleModel;
import com.aston.basketballapp.engine.model.standings.StandingsModel;
import com.aston.basketballapp.engine.model.standings.TeamStandingModel;
import com.aston.basketballapp.engine.repository.standings.StandingsRepository;
import com.aston.basketballapp.pages.home.main.MainFragmentViewModel;
import com.aston.basketballapp.utils.livedata.LiveDataStateData;
import com.aston.basketballapp.utils.livedata.StateMutableLiveData;
import com.google.gson.Gson;

import java.util.ArrayList;

import retrofit2.Call;
import retrofit2.Response;

public class MainFragmentViewModelUnitTest {

    @Mock
    StandingsRepository repository;

    String mockAPIFavouriteTeamJsonValue = "{\"api\":{\"status\":200,\"message\":\"GET standings\\/standard\\/2021\\/teamId\\/1\",\"results\":1,\"filters\":[\"conference\",\"division\",\"teamId\"],\"standings\":[{\"league\":\"standard\",\"teamId\":\"1\",\"win\":\"28\",\"loss\":\"30\",\"gamesBehind\":\"9.5\",\"lastTenWin\":\"5\",\"lastTenLoss\":\"5\",\"streak\":\"2\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"10\",\"win\":\"17\",\"loss\":\"18\"},\"division\":{\"name\":\"southeast\",\"rank\":\"3\",\"win\":\"7\",\"loss\":\"5\",\"GamesBehind\":\"9.0\"},\"winPercentage\":\".483\",\"lossPercentage\":\".517\",\"home\":{\"win\":\"17\",\"loss\":\"13\"},\"away\":{\"win\":\"11\",\"loss\":\"17\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"}]}}";
    String mockAPIScheduleJsonValue = "{\"api\":{\"status\":200,\"message\":\"GET standings\\/standard\\/2021\",\"results\":30,\"filters\":[\"conference\",\"division\",\"teamId\"],\"standings\":[{\"league\":\"standard\",\"teamId\":\"41\",\"win\":\"26\",\"loss\":\"31\",\"gamesBehind\":\"11.0\",\"lastTenWin\":\"3\",\"lastTenLoss\":\"7\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"11\",\"win\":\"19\",\"loss\":\"19\"},\"division\":{\"name\":\"southeast\",\"rank\":\"4\",\"win\":\"6\",\"loss\":\"6\",\"GamesBehind\":\"10.5\"},\"winPercentage\":\".456\",\"lossPercentage\":\".544\",\"home\":{\"win\":\"15\",\"loss\":\"15\"},\"away\":{\"win\":\"11\",\"loss\":\"16\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"5\",\"win\":\"29\",\"loss\":\"30\",\"gamesBehind\":\"9.0\",\"lastTenWin\":\"2\",\"lastTenLoss\":\"8\",\"streak\":\"2\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"9\",\"win\":\"19\",\"loss\":\"17\"},\"division\":{\"name\":\"southeast\",\"rank\":\"2\",\"win\":\"5\",\"loss\":\"6\",\"GamesBehind\":\"8.5\"},\"winPercentage\":\".492\",\"lossPercentage\":\".508\",\"home\":{\"win\":\"14\",\"loss\":\"13\"},\"away\":{\"win\":\"15\",\"loss\":\"17\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"20\",\"win\":\"37\",\"loss\":\"21\",\"gamesBehind\":\"0.5\",\"lastTenWin\":\"6\",\"lastTenLoss\":\"4\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"2\",\"win\":\"23\",\"loss\":\"12\"},\"division\":{\"name\":\"southeast\",\"rank\":\"1\",\"win\":\"10\",\"loss\":\"2\",\"GamesBehind\":\"0.0\"},\"winPercentage\":\".638\",\"lossPercentage\":\".362\",\"home\":{\"win\":\"19\",\"loss\":\"7\"},\"away\":{\"win\":\"18\",\"loss\":\"14\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"1\",\"win\":\"28\",\"loss\":\"30\",\"gamesBehind\":\"9.5\",\"lastTenWin\":\"5\",\"lastTenLoss\":\"5\",\"streak\":\"2\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"10\",\"win\":\"17\",\"loss\":\"18\"},\"division\":{\"name\":\"southeast\",\"rank\":\"3\",\"win\":\"7\",\"loss\":\"5\",\"GamesBehind\":\"9.0\"},\"winPercentage\":\".483\",\"lossPercentage\":\".517\",\"home\":{\"win\":\"17\",\"loss\":\"13\"},\"away\":{\"win\":\"11\",\"loss\":\"17\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"26\",\"win\":\"13\",\"loss\":\"47\",\"gamesBehind\":\"25.5\",\"lastTenWin\":\"3\",\"lastTenLoss\":\"7\",\"streak\":\"4\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"15\",\"win\":\"8\",\"loss\":\"31\"},\"division\":{\"name\":\"southeast\",\"rank\":\"5\",\"win\":\"2\",\"loss\":\"11\",\"GamesBehind\":\"25.0\"},\"winPercentage\":\".217\",\"lossPercentage\":\".783\",\"home\":{\"win\":\"5\",\"loss\":\"21\"},\"away\":{\"win\":\"8\",\"loss\":\"26\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"24\",\"win\":\"25\",\"loss\":\"34\",\"gamesBehind\":\"13.0\",\"lastTenWin\":\"2\",\"lastTenLoss\":\"8\",\"streak\":\"3\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"12\",\"win\":\"14\",\"loss\":\"22\"},\"division\":{\"name\":\"atlantic\",\"rank\":\"5\",\"win\":\"4\",\"loss\":\"7\",\"GamesBehind\":\"10.0\"},\"winPercentage\":\".424\",\"lossPercentage\":\".576\",\"home\":{\"win\":\"13\",\"loss\":\"17\"},\"away\":{\"win\":\"12\",\"loss\":\"17\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"4\",\"win\":\"31\",\"loss\":\"27\",\"gamesBehind\":\"6.5\",\"lastTenWin\":\"2\",\"lastTenLoss\":\"8\",\"streak\":\"2\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"8\",\"win\":\"21\",\"loss\":\"12\"},\"division\":{\"name\":\"atlantic\",\"rank\":\"4\",\"win\":\"7\",\"loss\":\"2\",\"GamesBehind\":\"3.5\"},\"winPercentage\":\".534\",\"lossPercentage\":\".466\",\"home\":{\"win\":\"13\",\"loss\":\"14\"},\"away\":{\"win\":\"18\",\"loss\":\"13\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"27\",\"win\":\"34\",\"loss\":\"23\",\"gamesBehind\":\"3.0\",\"lastTenWin\":\"6\",\"lastTenLoss\":\"4\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"5\",\"win\":\"19\",\"loss\":\"14\"},\"division\":{\"name\":\"atlantic\",\"rank\":\"1\",\"win\":\"4\",\"loss\":\"7\",\"GamesBehind\":\"0.0\"},\"winPercentage\":\".596\",\"lossPercentage\":\".404\",\"home\":{\"win\":\"16\",\"loss\":\"13\"},\"away\":{\"win\":\"18\",\"loss\":\"10\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"38\",\"win\":\"32\",\"loss\":\"25\",\"gamesBehind\":\"5.0\",\"lastTenWin\":\"8\",\"lastTenLoss\":\"2\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"7\",\"win\":\"21\",\"loss\":\"14\"},\"division\":{\"name\":\"atlantic\",\"rank\":\"3\",\"win\":\"5\",\"loss\":\"5\",\"GamesBehind\":\"2.0\"},\"winPercentage\":\".561\",\"lossPercentage\":\".439\",\"home\":{\"win\":\"16\",\"loss\":\"13\"},\"away\":{\"win\":\"16\",\"loss\":\"12\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"2\",\"win\":\"34\",\"loss\":\"26\",\"gamesBehind\":\"4.5\",\"lastTenWin\":\"9\",\"lastTenLoss\":\"1\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"6\",\"win\":\"24\",\"loss\":\"15\"},\"division\":{\"name\":\"atlantic\",\"rank\":\"2\",\"win\":\"7\",\"loss\":\"6\",\"GamesBehind\":\"1.5\"},\"winPercentage\":\".567\",\"lossPercentage\":\".433\",\"home\":{\"win\":\"20\",\"loss\":\"11\"},\"away\":{\"win\":\"14\",\"loss\":\"15\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"6\",\"win\":\"38\",\"loss\":\"21\",\"gamesBehind\":\"0.0\",\"lastTenWin\":\"7\",\"lastTenLoss\":\"3\",\"streak\":\"5\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"1\",\"win\":\"23\",\"loss\":\"13\"},\"division\":{\"name\":\"central\",\"rank\":\"1\",\"win\":\"7\",\"loss\":\"3\",\"GamesBehind\":\"0.0\"},\"winPercentage\":\".644\",\"lossPercentage\":\".356\",\"home\":{\"win\":\"23\",\"loss\":\"8\"},\"away\":{\"win\":\"15\",\"loss\":\"13\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"21\",\"win\":\"36\",\"loss\":\"23\",\"gamesBehind\":\"2.0\",\"lastTenWin\":\"6\",\"lastTenLoss\":\"4\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"3\",\"win\":\"22\",\"loss\":\"16\"},\"division\":{\"name\":\"central\",\"rank\":\"2\",\"win\":\"8\",\"loss\":\"3\",\"GamesBehind\":\"2.0\"},\"winPercentage\":\".610\",\"lossPercentage\":\".390\",\"home\":{\"win\":\"20\",\"loss\":\"10\"},\"away\":{\"win\":\"16\",\"loss\":\"13\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"7\",\"win\":\"35\",\"loss\":\"23\",\"gamesBehind\":\"2.5\",\"lastTenWin\":\"6\",\"lastTenLoss\":\"4\",\"streak\":\"2\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"4\",\"win\":\"20\",\"loss\":\"13\"},\"division\":{\"name\":\"central\",\"rank\":\"3\",\"win\":\"7\",\"loss\":\"3\",\"GamesBehind\":\"2.5\"},\"winPercentage\":\".603\",\"lossPercentage\":\".397\",\"home\":{\"win\":\"18\",\"loss\":\"9\"},\"away\":{\"win\":\"17\",\"loss\":\"14\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"15\",\"win\":\"20\",\"loss\":\"40\",\"gamesBehind\":\"18.5\",\"lastTenWin\":\"2\",\"lastTenLoss\":\"8\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"13\",\"win\":\"9\",\"loss\":\"29\"},\"division\":{\"name\":\"central\",\"rank\":\"4\",\"win\":\"2\",\"loss\":\"11\",\"GamesBehind\":\"18.5\"},\"winPercentage\":\".333\",\"lossPercentage\":\".667\",\"home\":{\"win\":\"14\",\"loss\":\"17\"},\"away\":{\"win\":\"6\",\"loss\":\"23\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"10\",\"win\":\"13\",\"loss\":\"45\",\"gamesBehind\":\"24.5\",\"lastTenWin\":\"2\",\"lastTenLoss\":\"8\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"east\",\"rank\":\"14\",\"win\":\"9\",\"loss\":\"23\"},\"division\":{\"name\":\"central\",\"rank\":\"5\",\"win\":\"3\",\"loss\":\"7\",\"GamesBehind\":\"24.5\"},\"winPercentage\":\".224\",\"lossPercentage\":\".776\",\"home\":{\"win\":\"8\",\"loss\":\"20\"},\"away\":{\"win\":\"5\",\"loss\":\"25\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"19\",\"win\":\"41\",\"loss\":\"19\",\"gamesBehind\":\"8.0\",\"lastTenWin\":\"8\",\"lastTenLoss\":\"2\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"3\",\"win\":\"28\",\"loss\":\"12\"},\"division\":{\"name\":\"southwest\",\"rank\":\"1\",\"win\":\"6\",\"loss\":\"4\",\"GamesBehind\":\"0.0\"},\"winPercentage\":\".683\",\"lossPercentage\":\".317\",\"home\":{\"win\":\"20\",\"loss\":\"10\"},\"away\":{\"win\":\"21\",\"loss\":\"9\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"14\",\"win\":\"15\",\"loss\":\"42\",\"gamesBehind\":\"32.5\",\"lastTenWin\":\"1\",\"lastTenLoss\":\"9\",\"streak\":\"6\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"15\",\"win\":\"7\",\"loss\":\"27\"},\"division\":{\"name\":\"southwest\",\"rank\":\"5\",\"win\":\"2\",\"loss\":\"8\",\"GamesBehind\":\"24.5\"},\"winPercentage\":\".263\",\"lossPercentage\":\".737\",\"home\":{\"win\":\"8\",\"loss\":\"18\"},\"away\":{\"win\":\"7\",\"loss\":\"24\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"8\",\"win\":\"34\",\"loss\":\"24\",\"gamesBehind\":\"14.0\",\"lastTenWin\":\"7\",\"lastTenLoss\":\"3\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"5\",\"win\":\"23\",\"loss\":\"14\"},\"division\":{\"name\":\"southwest\",\"rank\":\"2\",\"win\":\"10\",\"loss\":\"2\",\"GamesBehind\":\"6.0\"},\"winPercentage\":\".586\",\"lossPercentage\":\".414\",\"home\":{\"win\":\"20\",\"loss\":\"11\"},\"away\":{\"win\":\"14\",\"loss\":\"13\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"31\",\"win\":\"23\",\"loss\":\"36\",\"gamesBehind\":\"25.5\",\"lastTenWin\":\"5\",\"lastTenLoss\":\"5\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"12\",\"win\":\"14\",\"loss\":\"20\"},\"division\":{\"name\":\"southwest\",\"rank\":\"4\",\"win\":\"4\",\"loss\":\"6\",\"GamesBehind\":\"17.5\"},\"winPercentage\":\".390\",\"lossPercentage\":\".610\",\"home\":{\"win\":\"11\",\"loss\":\"18\"},\"away\":{\"win\":\"12\",\"loss\":\"18\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"23\",\"win\":\"23\",\"loss\":\"35\",\"gamesBehind\":\"25.0\",\"lastTenWin\":\"5\",\"lastTenLoss\":\"5\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"11\",\"win\":\"14\",\"loss\":\"19\"},\"division\":{\"name\":\"southwest\",\"rank\":\"3\",\"win\":\"4\",\"loss\":\"6\",\"GamesBehind\":\"17.0\"},\"winPercentage\":\".397\",\"lossPercentage\":\".603\",\"home\":{\"win\":\"13\",\"loss\":\"16\"},\"away\":{\"win\":\"10\",\"loss\":\"19\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"11\",\"win\":\"42\",\"loss\":\"17\",\"gamesBehind\":\"6.5\",\"lastTenWin\":\"6\",\"lastTenLoss\":\"4\",\"streak\":\"2\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"2\",\"win\":\"25\",\"loss\":\"11\"},\"division\":{\"name\":\"pacific\",\"rank\":\"2\",\"win\":\"9\",\"loss\":\"2\",\"GamesBehind\":\"6.5\"},\"winPercentage\":\".712\",\"lossPercentage\":\".288\",\"home\":{\"win\":\"26\",\"loss\":\"6\"},\"away\":{\"win\":\"16\",\"loss\":\"11\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"30\",\"win\":\"22\",\"loss\":\"38\",\"gamesBehind\":\"27.0\",\"lastTenWin\":\"4\",\"lastTenLoss\":\"6\",\"streak\":\"2\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"13\",\"win\":\"15\",\"loss\":\"22\"},\"division\":{\"name\":\"pacific\",\"rank\":\"5\",\"win\":\"5\",\"loss\":\"7\",\"GamesBehind\":\"27.0\"},\"winPercentage\":\".367\",\"lossPercentage\":\".633\",\"home\":{\"win\":\"15\",\"loss\":\"17\"},\"away\":{\"win\":\"7\",\"loss\":\"21\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"28\",\"win\":\"48\",\"loss\":\"10\",\"gamesBehind\":\"0.0\",\"lastTenWin\":\"9\",\"lastTenLoss\":\"1\",\"streak\":\"7\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"1\",\"win\":\"28\",\"loss\":\"7\"},\"division\":{\"name\":\"pacific\",\"rank\":\"1\",\"win\":\"6\",\"loss\":\"4\",\"GamesBehind\":\"0.0\"},\"winPercentage\":\".828\",\"lossPercentage\":\".172\",\"home\":{\"win\":\"26\",\"loss\":\"5\"},\"away\":{\"win\":\"22\",\"loss\":\"5\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"16\",\"win\":\"29\",\"loss\":\"31\",\"gamesBehind\":\"20.0\",\"lastTenWin\":\"4\",\"lastTenLoss\":\"6\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"8\",\"win\":\"16\",\"loss\":\"23\"},\"division\":{\"name\":\"pacific\",\"rank\":\"3\",\"win\":\"5\",\"loss\":\"6\",\"GamesBehind\":\"20.0\"},\"winPercentage\":\".483\",\"lossPercentage\":\".517\",\"home\":{\"win\":\"17\",\"loss\":\"13\"},\"away\":{\"win\":\"12\",\"loss\":\"18\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"17\",\"win\":\"27\",\"loss\":\"31\",\"gamesBehind\":\"21.0\",\"lastTenWin\":\"3\",\"lastTenLoss\":\"7\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"9\",\"win\":\"15\",\"loss\":\"19\"},\"division\":{\"name\":\"pacific\",\"rank\":\"4\",\"win\":\"2\",\"loss\":\"8\",\"GamesBehind\":\"21.0\"},\"winPercentage\":\".466\",\"lossPercentage\":\".534\",\"home\":{\"win\":\"18\",\"loss\":\"13\"},\"away\":{\"win\":\"9\",\"loss\":\"18\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"40\",\"win\":\"36\",\"loss\":\"22\",\"gamesBehind\":\"12.0\",\"lastTenWin\":\"6\",\"lastTenLoss\":\"4\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"4\",\"win\":\"22\",\"loss\":\"12\"},\"division\":{\"name\":\"northwest\",\"rank\":\"1\",\"win\":\"11\",\"loss\":\"1\",\"GamesBehind\":\"0.0\"},\"winPercentage\":\".621\",\"lossPercentage\":\".379\",\"home\":{\"win\":\"21\",\"loss\":\"10\"},\"away\":{\"win\":\"15\",\"loss\":\"12\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"22\",\"win\":\"31\",\"loss\":\"28\",\"gamesBehind\":\"17.5\",\"lastTenWin\":\"7\",\"lastTenLoss\":\"3\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"7\",\"win\":\"20\",\"loss\":\"18\"},\"division\":{\"name\":\"northwest\",\"rank\":\"3\",\"win\":\"7\",\"loss\":\"4\",\"GamesBehind\":\"5.5\"},\"winPercentage\":\".525\",\"lossPercentage\":\".475\",\"home\":{\"win\":\"17\",\"loss\":\"11\"},\"away\":{\"win\":\"14\",\"loss\":\"17\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"9\",\"win\":\"33\",\"loss\":\"25\",\"gamesBehind\":\"15.0\",\"lastTenWin\":\"6\",\"lastTenLoss\":\"4\",\"streak\":\"3\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"6\",\"win\":\"18\",\"loss\":\"17\"},\"division\":{\"name\":\"northwest\",\"rank\":\"2\",\"win\":\"4\",\"loss\":\"8\",\"GamesBehind\":\"3.0\"},\"winPercentage\":\".569\",\"lossPercentage\":\".431\",\"home\":{\"win\":\"16\",\"loss\":\"10\"},\"away\":{\"win\":\"17\",\"loss\":\"15\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"29\",\"win\":\"25\",\"loss\":\"34\",\"gamesBehind\":\"23.5\",\"lastTenWin\":\"4\",\"lastTenLoss\":\"6\",\"streak\":\"4\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"10\",\"win\":\"11\",\"loss\":\"24\"},\"division\":{\"name\":\"northwest\",\"rank\":\"4\",\"win\":\"1\",\"loss\":\"8\",\"GamesBehind\":\"11.5\"},\"winPercentage\":\".424\",\"lossPercentage\":\".576\",\"home\":{\"win\":\"16\",\"loss\":\"16\"},\"away\":{\"win\":\"9\",\"loss\":\"18\"},\"winStreak\":\"1\",\"tieBreakerPoints\":\"\"},{\"league\":\"standard\",\"teamId\":\"25\",\"win\":\"18\",\"loss\":\"40\",\"gamesBehind\":\"30.0\",\"lastTenWin\":\"4\",\"lastTenLoss\":\"6\",\"streak\":\"1\",\"seasonYear\":\"2021\",\"conference\":{\"name\":\"west\",\"rank\":\"14\",\"win\":\"13\",\"loss\":\"24\"},\"division\":{\"name\":\"northwest\",\"rank\":\"5\",\"win\":\"3\",\"loss\":\"5\",\"GamesBehind\":\"18.0\"},\"winPercentage\":\".310\",\"lossPercentage\":\".690\",\"home\":{\"win\":\"9\",\"loss\":\"19\"},\"away\":{\"win\":\"9\",\"loss\":\"21\"},\"winStreak\":\"0\",\"tieBreakerPoints\":\"\"}]}}";

    @Rule
    public TestRule rule = new InstantTaskExecutorRule();

    @Before
    public void before() {
        repository = Mockito.mock(StandingsRepository.class, Mockito.RETURNS_DEEP_STUBS);
        Mockito.when(repository.getSpecificTeamStandings("teamID")).thenReturn(mockAPIFavouriteTeam());
        Mockito.when(repository.getStandings()).thenReturn(mockAPISchedule());

    }

    Call<StandingsModel> mockAPIFavouriteTeam() {
        Gson gson = new Gson();
        StandingsModel model = gson.fromJson(mockAPIFavouriteTeamJsonValue, StandingsModel.class);
        return Calls.response(Response.success(model));
    }

    Call<StandingsModel> mockAPISchedule() {
        Gson gson = new Gson();
        StandingsModel model = gson.fromJson(mockAPIScheduleJsonValue, StandingsModel.class);
        return Calls.response(Response.success(model));
    }

    @Test
    public void getTeamDetailsWhenOver1() {
        MainFragmentViewModel viewModel = new MainFragmentViewModel(null);
        assertEquals("Atlanta Hawks", viewModel.getTeamName("1"));
        assertEquals("https://loodibee.com/wp-content/uploads/nba-atlanta-hawks-logo.png", viewModel.getTeamLogo("1"));
    }

    @Test
    public void getTeamDetailsWhenBelow1() {
        MainFragmentViewModel viewModel = new MainFragmentViewModel(null);
        assertEquals("", viewModel.getTeamName("-1"));
        assertEquals("", viewModel.getTeamLogo("-1"));
    }

    @Test
    public void mockAPICallForFavouriteTeam() {
        MainFragmentViewModel viewModel = new MainFragmentViewModel(repository);
        StateMutableLiveData<ArrayList<String>> data = viewModel.getFavouriteTeamInformation("teamId");
        if(data.getValue() == null) {
            fail("API CALL for Favourite Team Failed");
        }
    }

    @Test
    public void mockAPICallForSchedule() {
        MainFragmentViewModel viewModel = new MainFragmentViewModel(repository);
        StateMutableLiveData<ArrayList<TeamStandingModel>> data = viewModel.getSchedule();
        if(data.getValue() == null) {
            fail("API CALL for Schedule Failed");
        }
    }




}
